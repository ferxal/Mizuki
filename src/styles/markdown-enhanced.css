/* 优雅协调的Markdown HTML元素样式 */

/* Details/Summary 标签 - 精致折叠栏（增强动画效果） */
.custom-md details {
  @apply my-4 border border-[var(--line-divider)] rounded-[var(--radius-large)] 
         bg-[var(--card-bg)] shadow-sm;
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  overflow: hidden;
}

.custom-md details:hover {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  transform: translateY(-1px);
}

.custom-md details[open] {
  @apply shadow-lg;
}

.custom-md summary {
  @apply cursor-pointer px-4 py-3 text-sm font-medium text-[var(--btn-content)] 
         bg-[var(--btn-regular-bg)] hover:bg-[var(--btn-regular-bg-hover)] 
         transition-all duration-300 relative;
  list-style: none;
  user-select: none;
  display: flex;
  align-items: center;
  border-bottom: 1px solid transparent;
}

.custom-md summary::-webkit-details-marker {
  display: none;
}

.custom-md summary::before {
  content: '';
  @apply w-4 h-4 mr-3;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2.5' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='9 18 15 12 9 6'/%3E%3C/svg%3E");
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  opacity: 0.7;
  flex-shrink: 0;
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  transform-origin: center;
}

.custom-md details[open] summary {
  border-bottom-color: var(--line-divider);
  @apply bg-[var(--btn-regular-bg-hover)];
}

.custom-md details[open] summary::before {
  transform: rotate(90deg) scale(1.1);
  opacity: 1;
}

.custom-md summary:hover::before {
  opacity: 1;
  transform: scale(1.1);
}

.custom-md details[open] summary:hover::before {
  transform: rotate(90deg) scale(1.2);
}

.custom-md details > *:not(summary) {
  @apply px-8 py-4;
  overflow: hidden;
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  max-height: 0;
  opacity: 0;
  transform: translateY(-10px);
}

.custom-md details[open] > *:not(summary) {
  max-height: 1000px;
  opacity: 1;
  transform: translateY(0);
}

.custom-md details > *:not(summary):first-child {
  @apply pt-2;
}

.custom-md details > *:not(summary):last-child {
  @apply pb-4;
}

/* 嵌套details样式 - 层级化设计（增强动画） */
.custom-md details details {
  @apply my-2 mx-3 border-l border-[var(--line-divider)] rounded-none;
  background: transparent;
  border-width: 1px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.custom-md details details:hover {
  transform: translateX(2px);
}

.custom-md details details summary {
  @apply px-3 py-2 text-xs font-normal bg-transparent;
  border-bottom: none;
  transition: all 0.3s ease;
}

.custom-md details details summary::before {
  @apply w-2.5 h-2.5 mr-2;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.custom-md details details[open] summary::before {
  transform: rotate(90deg) scale(1.1);
}

.custom-md details details > *:not(summary) {
  @apply px-6 py-2;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  max-height: 0;
  opacity: 0;
  transform: translateX(-5px);
}

.custom-md details details[open] > *:not(summary) {
  max-height: 500px;
  opacity: 1;
  transform: translateX(0);
}

.custom-md details details > *:not(summary):first-child {
  @apply pt-1;
}

.custom-md details details > *:not(summary):last-child {
  @apply pb-3;
}

/* 表格样式 - 极简优雅设计 */
.custom-md table {
  @apply w-full my-6 border-collapse border border-[var(--line-divider)] 
         rounded-[var(--radius-large)] overflow-hidden;
  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
}

.custom-md th {
  @apply bg-[var(--btn-regular-bg)] text-[var(--btn-content)] 
         font-medium px-5 py-3 text-left border-b border-[var(--line-divider)];
  letter-spacing: 0.025em;
}

.custom-md td {
  @apply px-5 py-3 border-b border-[var(--line-divider)] 
         transition-colors duration-150;
}

.custom-md tr:last-child td {
  @apply border-b-0;
}

.custom-md tbody tr {
  @apply transition-colors duration-150;
}

.custom-md tbody tr:hover {
  @apply bg-[var(--btn-regular-bg-hover)];
}

/* 表格紧凑模式 */
.custom-md table.compact {
  @apply text-sm;
}

.custom-md table.compact th,
.custom-md table.compact td {
  @apply px-3 py-2;
}

/* 任务列表 - 精致复选框设计 */
.custom-md .task-list-item {
  @apply list-none relative pl-7 my-2;
}

.custom-md .task-list-item-checkbox {
  @apply absolute left-0 top-0.5 w-4 h-4 rounded 
         border border-[var(--line-divider)] bg-[var(--card-bg)] 
         checked:bg-[var(--btn-content)] checked:border-[var(--btn-content)] 
         transition-all duration-200 cursor-pointer;
  appearance: none;
  position: relative;
}

.custom-md .task-list-item-checkbox:hover {
  @apply border-[var(--btn-content)];
}

.custom-md .task-list-item-checkbox:checked {
  @apply bg-[var(--btn-content)] border-[var(--btn-content)];
}

.custom-md .task-list-item-checkbox:checked::before {
  content: '';
  @apply absolute top-1/2 left-1/2 w-2 h-1.5 
         border-r-2 border-b-2 border-white 
         transform -translate-x-1/2 -translate-y-1/2 rotate-45;
}

.custom-md .task-list-item-checkbox:checked + label {
  @apply text-[var(--btn-content)] opacity-75;
}

/* 代码块样式增强 */
.custom-md .expressive-code {
  @apply my-6 rounded-lg overflow-hidden shadow-md;
}

.custom-md .expressive-code pre {
  @apply my-0;
}

/* 内联代码样式增强 */
.custom-md code:not(pre code) {
  @apply bg-[var(--inline-code-bg)] text-[var(--inline-code-color)] 
         px-1.5 py-0.5 rounded text-sm font-mono
         border border-[var(--line-divider)];
}

/* 图片样式 - 优雅简洁 */
.custom-md img {
  @apply rounded-[var(--radius-large)] my-6 mx-auto max-w-full h-auto 
         transition-all duration-300;
  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
}

.custom-md img:hover {
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  transform: translateY(-1px);
}

.custom-md img + em {
  @apply block text-center text-sm text-[var(--content-meta)] mt-3 italic;
}

/* 图片组样式 */
.custom-md .image-group {
  @apply grid grid-cols-2 gap-4 my-6;
}

.custom-md .image-group img {
  @apply my-0;
}

/* 水平分割线 - 极简设计 */
.custom-md hr {
  @apply my-8 border-t border-[var(--line-divider)];
}

/* 引用块 - 优雅引用样式 */
.custom-md blockquote {
  @apply my-6 pl-5 pr-4 py-4 border-l-2 border-[var(--btn-content)] 
         bg-[var(--btn-regular-bg)] rounded-r-[var(--radius-large)];
  font-style: normal;
}

.custom-md blockquote > *:first-child {
  @apply mt-0;
}

.custom-md blockquote > *:last-child {
  @apply mb-0;
}

.custom-md blockquote p {
  @apply text-[var(--btn-content)] opacity-90;
}

/* 嵌套引用块 */
.custom-md blockquote blockquote {
  @apply my-3 mx-2 border-l border-[var(--line-divider)];
}

/* 列表样式 - 统一设计语言 */
.custom-md ul, .custom-md ol {
  @apply my-4 pl-6 space-y-1;
}

.custom-md li {
  @apply leading-relaxed;
}

/* details内部的列表额外间距 */
.custom-md details ul, .custom-md details ol {
  @apply pl-8;
}

.custom-md details details ul, .custom-md details details ol {
  @apply pl-6;
}

.custom-md ul li::marker {
  @apply text-[var(--btn-content)] opacity-60;
}

.custom-md ol li::marker {
  @apply text-[var(--btn-content)] opacity-60 font-medium;
}

/* 定义列表 - 简洁定义样式 */
.custom-md dl {
  @apply my-4 space-y-2;
}

.custom-md dt {
  @apply font-medium text-[var(--btn-content)];
}

.custom-md dd {
  @apply ml-4 text-[var(--content-meta)];
}

/* 键盘快捷键 - 精致按键样式 */
.custom-md kbd {
  @apply inline-flex items-center justify-center px-2 py-0.5 
         text-xs font-mono bg-[var(--btn-regular-bg)] 
         border border-[var(--line-divider)] rounded 
         shadow-sm align-middle;
  min-width: 1.25rem;
}

/* 标记文本 - 柔和高亮 */
.custom-md mark {
  @apply bg-[var(--selection-bg)] px-1 rounded-sm;
}

/* 文本修饰 - 优雅样式 */
.custom-md del {
  @apply text-[var(--content-meta)] line-through opacity-75;
}

.custom-md ins {
  @apply text-[var(--btn-content)] underline decoration-[var(--btn-content)] 
         decoration-1 underline-offset-2;
}

/* 上下标 - 精细调整 */
.custom-md sup, .custom-md sub {
  @apply text-xs leading-none;
}

.custom-md sup {
  @apply align-super;
}

.custom-md sub {
  @apply align-sub;
}

/* 代码样式 - 融入主题 */
.custom-md code:not(pre code) {
  @apply bg-[var(--inline-code-bg)] text-[var(--inline-code-color)] 
         px-1.5 py-0.5 rounded text-sm font-mono;
}

/* 响应式优化 */
@media (max-width: 768px) {
  .custom-md details {
    @apply mx-0 my-3;
    transition-duration: 0.25s;
  }
  
  .custom-md details:hover {
    transform: none;
  }
  
  .custom-md details summary {
    @apply px-3 py-2.5 text-xs;
    transition-duration: 0.2s;
  }
  
  .custom-md details summary::before {
    @apply w-3 h-3 mr-2;
    transition-duration: 0.25s;
  }
  
  .custom-md details > *:not(summary) {
    @apply px-5 py-3;
    transition-duration: 0.25s;
  }
  
  .custom-md details details {
    @apply mx-2 my-1;
    transition-duration: 0.2s;
  }
  
  .custom-md details details:hover {
    transform: translateX(1px);
  }
  
  .custom-md details details summary {
    @apply px-2 py-2 text-xs;
    transition-duration: 0.15s;
  }
  
  .custom-md details details summary::before {
    @apply w-2 h-2 mr-1.5;
    transition-duration: 0.2s;
  }
  
  .custom-md details details > *:not(summary) {
    @apply px-4 py-2;
    transition-duration: 0.2s;
  }
  
  .custom-md details ul, .custom-md details ol {
    @apply pl-6;
  }
  
  .custom-md details details ul, .custom-md details details ol {
    @apply pl-5;
  }
  
  .custom-md table {
    @apply text-sm;
  }
  
  .custom-md th,
  .custom-md td {
    @apply px-2 py-1.5 text-xs;
  }
  
  .custom-md .image-group {
    @apply grid-cols-1 gap-2;
  }
}

/* 主题适配优化 */
@media (prefers-color-scheme: dark) {
  .custom-md details {
    @apply border-[var(--line-divider)];
  }
  
  .custom-md summary {
    @apply bg-[var(--btn-regular-bg)];
  }
  
  .custom-md table {
    @apply border-[var(--line-divider)];
  }
  
  .custom-md th {
    @apply bg-[var(--btn-regular-bg)];
  }
}

/* 平滑滚动动画 */
@media (prefers-reduced-motion: no-preference) {
  .custom-md * {
    transition: color 0.2s ease, background-color 0.2s ease, 
                border-color 0.2s ease, box-shadow 0.2s ease;
  }
}