---
export interface Props {
	size?: number;
	character?: "chisato" | "takina";
	controls?: boolean;
	draggable?: boolean;
}

const {
	size = 250,
	character = "chisato",
	controls = true,
	draggable = true,
} = Astro.props;
---

<div style="display: flex; justify-content: center; margin: 2rem 0;">
  <div 
    id="sakana-demo" 
    data-size={size}
    data-character={character}
    data-controls={controls}
    data-draggable={draggable}
    style={`width: ${size}px; height: ${size}px; position: relative;`}
  ></div>
</div>

<script>
  import 'sakana-widget/lib/index.css';
  import SakanaWidget from 'sakana-widget';

  // 初始化所有Sakana演示组件
  document.addEventListener('DOMContentLoaded', () => {
    const containers = document.querySelectorAll('[id="sakana-demo"]');
    containers.forEach(container => {
      const size = parseInt(container.getAttribute('data-size') || '250');
      const character = container.getAttribute('data-character') || 'chisato';
      const controls = container.getAttribute('data-controls') !== 'false';
      const draggable = container.getAttribute('data-draggable') !== 'false';

      new SakanaWidget({
        size,
        character: character as 'chisato' | 'takina',
        controls,
        draggable
      }).mount(container);
    });
  });
</script>