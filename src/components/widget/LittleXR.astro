---
interface Props {
    size?: number;
    autoFit?: boolean;
    character?: 'chisato' | 'takina';
    controls?: boolean;
    rod?: boolean;
    draggable?: boolean;
    stroke?: {color?: string;width?: number;};
    threshold?: number;
    rotate?: number;
    title?: boolean;
    image?: string;
};
const {
    size: 150,
    autoFit: true,
    character: 'chisato',
    controls: true,
    rod: true,
    draggable: true,
    stroke: {
        color: '#000',
        width: 2,
    },
    threshold: 0.5,
    rotate: 0,
    title: true,
} = Astro.props;

---
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sakana-widget@2.7.1/lib/sakana.min.css" />
<script src="https://cdn.jsdelivr.net/npm/sakana-widget@2.7.1/lib/sakana.min.js"></script>

<script>
function initSakana() {
  document.querySelectorAll('[littleXR]').forEach(el => {
    if (!el.id) el.id = 'sakana-' + Math.random().toString(36).slice(2, 9);
    const takina = SakanaWidget.getCharacter('takina');
    if(!!{image}) takina.image = {image};
    SakanaWidget.registerCharacter('user', takina);
    new SakanaWidget(interface).mount('#' + el.id);
  });
}
document.addEventListener('DOMContentLoaded', initSakana);
</script>